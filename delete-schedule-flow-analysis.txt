# Delete Schedule ë²„íŠ¼ í´ë¦­ ì‹œ ì „ì²´ íë¦„ ë¶„ì„

## 1. ì´ˆê¸° ìƒíƒœ (Calendar.tsx)
- isEditModalOpen: false
- selectedEvent: null  
- events: ì „ì²´ ì´ë²¤íŠ¸ ë°°ì—´

## 2. ì´ë²¤íŠ¸ í´ë¦­ ì‹œ íë¦„

### 2-1. ìº˜ë¦°ë”ì—ì„œ ì´ë²¤íŠ¸ í´ë¦­
```
ì‚¬ìš©ìê°€ ìº˜ë¦°ë”ì˜ scheduled ìƒíƒœ ì´ë²¤íŠ¸ í´ë¦­
â†“
handleEventClick(event) í•¨ìˆ˜ í˜¸ì¶œ
â†“
ìƒíƒœ ë³€ê²½:
- setSelectedEvent(event) â†’ í´ë¦­í•œ ì´ë²¤íŠ¸ ê°ì²´ ì €ì¥
- setIsEditModalOpen(true) â†’ EditPostModal ì—´ê¸°
```

### 2-2. EditPostModal ë Œë”ë§
```
Calendar.tsxì—ì„œ EditPostModal ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
â†“
Props ì „ë‹¬:
- isOpen: isEditModalOpen (true)
- event: selectedEvent (í´ë¦­í•œ ì´ë²¤íŠ¸)
- onEventUpdate: handleEventUpdate í•¨ìˆ˜
- onEventDelete: handleEventDelete í•¨ìˆ˜
- onOpenChange: setIsEditModalOpen í•¨ìˆ˜
```

## 3. Delete Schedule ë²„íŠ¼ í´ë¦­ íë¦„

### 3-1. Delete Schedule ë²„íŠ¼ í´ë¦­
```
EditPostModal.tsx ë‚´ë¶€ì˜ AlertDialog ì»´í¬ë„ŒíŠ¸
â†“
AlertDialogTrigger ë²„íŠ¼ í´ë¦­ (Delete Schedule)
â†“
setIsAlertDialogOpen(true) â†’ AlertDialog ì—´ë¦¼
```

### 3-2. AlertDialog ìƒíƒœ (ìˆ˜ì •ë¨)
```
AlertDialogê°€ ì—´ë¦° ìƒíƒœ:
- EditPostModalì€ ì—¬ì „íˆ ì—´ë¦° ìƒíƒœ
- AlertDialogëŠ” EditPostModal ìœ„ì— ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ
- isAlertDialogOpen: true (ì§ì ‘ ê´€ë¦¬)
```

### 3-3. AlertDialog í™•ì¸ ë²„íŠ¼ í´ë¦­
```
AlertDialogAction ë²„íŠ¼ í´ë¦­ ("í™•ì¸")
â†“
onClick={handleDelete} ì‹¤í–‰
â†“
handleDelete í•¨ìˆ˜ ë‚´ë¶€ ë¡œì§:
1. if (!event) return â†’ ì´ë²¤íŠ¸ ì¡´ì¬ í™•ì¸
2. onEventDelete(event.id) â†’ Calendarì˜ handleEventDelete í˜¸ì¶œ (ë¹„ë™ê¸°, await ì—†ìŒ)
3. onOpenChange(false) â†’ EditPostModal ì¦‰ì‹œ ë‹«ê¸°
4. setIsAlertDialogOpen(false) â†’ AlertDialog ë‹«ê¸° (í•˜ì§€ë§Œ EditPostModalì´ ì´ë¯¸ ì–¸ë§ˆìš´íŠ¸ë¨)
```

## 4. ì‚­ì œ ì²˜ë¦¬ íë¦„ (Calendar.tsxì˜ handleEventDelete)

### 4-1. ì„œë²„ ì•¡ì…˜ í˜¸ì¶œ
```
handleEventDelete(eventId) í•¨ìˆ˜ ì‹¤í–‰ (ë¹„ë™ê¸°)
â†“
deleteSchedule(eventId) ì„œë²„ ì•¡ì…˜ í˜¸ì¶œ
â†“
Supabaseì—ì„œ í•´ë‹¹ ì´ë²¤íŠ¸ ì‚­ì œ
```

### 4-2. í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸
```
ì‚­ì œ ì„±ê³µ ì‹œ:
â†“
setEvents(events.filter(event => event.id !== eventId))
â†’ events ë°°ì—´ì—ì„œ í•´ë‹¹ ì´ë²¤íŠ¸ ì œê±°
```

## 5. Modal ë‹«ê¸° íë¦„

### 5-1. EditPostModal ë‹«ê¸°
```
handleDeleteì—ì„œ onOpenChange(false) í˜¸ì¶œ
â†“
Calendar.tsxì˜ setIsEditModalOpen(false) ì‹¤í–‰
â†“
EditPostModal ì¦‰ì‹œ ì–¸ë§ˆìš´íŠ¸
```

### 5-2. ìµœì¢… ìƒíƒœ
```
- isEditModalOpen: false
- selectedEvent: ì´ì „ ê°’ ìœ ì§€ (nullë¡œ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ)
- events: ì‚­ì œëœ ì´ë²¤íŠ¸ê°€ ì œê±°ëœ ë°°ì—´ (ë¹„ë™ê¸°ì ìœ¼ë¡œ)
- AlertDialog: setIsAlertDialogOpen(false) í˜¸ì¶œë˜ì§€ë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ì´ë¯¸ ì–¸ë§ˆìš´íŠ¸ë¨
```

## 6. ìƒíƒœ ê´€ë¦¬ ë¬¸ì œì  ë¶„ì„

### 6-1. selectedEvent ì •ë¦¬ ëˆ„ë½
```
ë¬¸ì œ: EditPostModalì´ ë‹«í ë•Œ selectedEventê°€ nullë¡œ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ
ê²°ê³¼: ì´ì „ ì„ íƒëœ ì´ë²¤íŠ¸ ì •ë³´ê°€ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ìˆìŒ
```

### 6-2. ğŸš¨ ë¹„ë™ê¸° ì²˜ë¦¬ ë¬¸ì œ (í•µì‹¬ ë¬¸ì œ)
```
ë¬¸ì œ: 
- onEventDelete(event.id) ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ (Calendar.tsxì˜ handleEventDelete)
- í•˜ì§€ë§Œ EditPostModalì—ì„œ await ì—†ì´ í˜¸ì¶œ
- ì‚­ì œ ì™„ë£Œ ì „ì— onOpenChange(false)ë¡œ ëª¨ë‹¬ì„ ì¦‰ì‹œ ë‹«ìŒ

ê²°ê³¼:
- ì‚­ì œ ì¤‘ ì—ëŸ¬ ë°œìƒí•´ë„ ì‚¬ìš©ìê°€ ëª¨ë¦„
- ì‚­ì œ ì™„ë£Œ í™•ì¸ ì—†ì´ UIê°€ ë‹«í˜
- AlertDialog ìƒíƒœê°€ ì œëŒ€ë¡œ ì •ë¦¬ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
```

### 6-3. ğŸš¨ ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ìˆœì„œ ë¬¸ì œ
```
í˜„ì¬ ìˆœì„œ:
1. onEventDelete(event.id) - ë¹„ë™ê¸° ì‹œì‘
2. onOpenChange(false) - EditPostModal ì¦‰ì‹œ ì–¸ë§ˆìš´íŠ¸
3. setIsAlertDialogOpen(false) - ì–¸ë§ˆìš´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ ë³€ê²½ ì‹œë„

ë¬¸ì œ:
- setIsAlertDialogOpen(false)ê°€ íš¨ê³¼ ì—†ìŒ
- Reactì—ì„œ ì–¸ë§ˆìš´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ ë³€ê²½ ì‹œ ê²½ê³  ë°œìƒ ê°€ëŠ¥
```

### 6-4. ì¤‘ì²©ëœ Dialog ê´€ë¦¬
```
í˜„ì¬ êµ¬ì¡°:
Dialog (EditPostModal)
  â””â”€â”€ AlertDialog (ì‚­ì œ í™•ì¸)

ë¬¸ì œì :
- AlertDialogê°€ ì—´ë¦´ ë•Œ EditPostModal ìƒíƒœì™€ ë…ë¦½ì 
- ë‘ dialogì˜ z-index ê´€ë¦¬
- ESC í‚¤ ì²˜ë¦¬ ì‹œ ì–´ë–¤ dialogê°€ ë‹«íì§€ ë¶ˆëª…í™•
```

### 6-5. ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±
```
handleEventDeleteì—ì„œ:
- deleteSchedule ì‹¤íŒ¨ ì‹œ UI ìƒíƒœ ë¡¤ë°± ì—†ìŒ
- ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ ì•Œë¦¼ ì—†ìŒ
- ë‚™ê´€ì  ì—…ë°ì´íŠ¸(optimistic update) ë¯¸ì ìš©
```

## 7. ê°œì„  ì œì•ˆ

### 7-1. ğŸ¯ ë¹„ë™ê¸° ì²˜ë¦¬ ê°œì„  (ìš°ì„ ìˆœìœ„ 1)
```javascript
const handleDelete = async () => {
  if (!event) return
  
  // 1. AlertDialog ë¨¼ì € ë‹«ê¸°
  setIsAlertDialogOpen(false)
  
  try {
    // 2. ì‚­ì œ ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
    await onEventDelete(event.id)
    
    // 3. ì‚­ì œ ì„±ê³µ í›„ EditPostModal ë‹«ê¸°
    onOpenChange(false)
  } catch (error) {
    // 4. ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
    console.error('ì‚­ì œ ì‹¤íŒ¨:', error)
    // toast ì•Œë¦¼ ì¶”ê°€ ê°€ëŠ¥
  }
}
```

### 7-2. onEventDelete í•¨ìˆ˜ íƒ€ì… ë³€ê²½
```javascript
// Calendar.tsxì—ì„œ
const handleEventDelete = async (eventId: string): Promise<void> => {
  try {
    const { error } = await deleteSchedule(eventId)
    if (error) throw error
    
    setEvents(events.filter(event => event.id !== eventId))
  } catch (error) {
    console.error('Error deleting event:', error)
    throw error // ì—ëŸ¬ë¥¼ ë‹¤ì‹œ throwí•´ì„œ EditPostModalì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥
  }
}
```

### 7-3. selectedEvent ì •ë¦¬
```
EditPostModalì˜ onOpenChangeì—ì„œ:
if (!isOpen) {
  setSelectedEvent(null)
}
```

### 7-4. ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
```
try-catch ë¸”ë¡ ì¶”ê°€
ì‹¤íŒ¨ ì‹œ toast ì•Œë¦¼
ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ì ìš©
```

### 7-5. Dialog ìƒíƒœ ê°œì„ 
```
AlertDialog ìƒíƒœë¥¼ EditPostModalì—ì„œ ì§ì ‘ ê´€ë¦¬ âœ… (ì™„ë£Œ)
ë˜ëŠ” ì‚­ì œ í™•ì¸ì„ ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬
```

## 8. ğŸ” ë””ë²„ê¹… ë°©ë²•

### 8-1. ì‹¤í–‰ ìˆœì„œ í™•ì¸
```javascript
const handleDelete = () => {
  console.log('1. handleDelete ì‹œì‘')
  if (!event) return
  
  console.log('2. onEventDelete í˜¸ì¶œ ì „')
  onEventDelete(event.id)
  console.log('3. onEventDelete í˜¸ì¶œ í›„ (ë¹„ë™ê¸°)')
  
  console.log('4. onOpenChange í˜¸ì¶œ ì „')
  onOpenChange(false)
  console.log('5. onOpenChange í˜¸ì¶œ í›„')
  
  console.log('6. setIsAlertDialogOpen í˜¸ì¶œ ì „')
  setIsAlertDialogOpen(false)
  console.log('7. setIsAlertDialogOpen í˜¸ì¶œ í›„')
}
```

### 8-2. React DevToolsë¡œ ìƒíƒœ ë³€í™” ëª¨ë‹ˆí„°ë§
```
- isEditModalOpen ìƒíƒœ ë³€í™”
- isAlertDialogOpen ìƒíƒœ ë³€í™”
- selectedEvent ìƒíƒœ ë³€í™”
- events ë°°ì—´ ë³€í™”
``` 